package main

import (
	"fmt"
	"log"
	"net/http"
	"os"

	"{{MODULE_PATH}}/app"
)

func main() {
	// Check if running as desktop dev server
	if len(os.Args) > 1 && os.Args[1] == "serve" {
		runDevServer()
		return
	}

	// Default: show usage
	fmt.Println("{{PROJECT_NAME}} - built with gohtmx")
	fmt.Println()
	fmt.Println("Usage:")
	fmt.Println("  go run . serve     Start development server")
	fmt.Println("  gohtmx dev         Start dev server with hot reload")
	fmt.Println("  gohtmx run ios     Build and run on iOS Simulator")
	fmt.Println("  gohtmx run android Build and run on Android Emulator")
}

// runDevServer starts an HTTP server for desktop testing
func runDevServer() {
	r := app.NewRouter()

	port := ":8080"
	fmt.Printf("Starting dev server at http://localhost%s\n", port)
	log.Fatal(http.ListenAndServe(port, r.Handler()))
}
